/*
 MIT
  @author DUzun.Me

*/
(function(e,u){function n(){function a(p,a){p in g||(y("tracking ",p,"-",(a+"").replace(/[\r\n]+/g," ").substr(0,32)),q.push(p));g[p]=a}k&&clearTimeout(k);r&&clearTimeout(r);c.href=h.href;var b=z.call(l.scripts||l.querySelectorAll("script[src]")).map(A).filter(function(a){return a});J&&(b=b.concat(B().map(A).filter(function(a){return a})));K&&b.push(h.pathname+h.search.replace(s,""));var d=e.watchemToo;d&&Object.keys(d).forEach(function(a){c.href=a;if(c.hostname!=C)delete d[a];else{var f=c.pathname+
c.search.replace(s,"");d[a]?b.push(f):g[f]=!1}});b.forEach(function(b){b&&(b in g||v({url:b,type:D},function(d,c,e){(d=w(e,d))?a(b,d):v({url:b,type:E},function(d,c,f){d=w(f,d);F[b]=E;a(b,d)})}))});m=0;k=t&&setTimeout(x,t);r=G&&setTimeout(n,G);return g}function x(){var a=m,b=q[a];v({url:b,type:F[b]||D},function(d,c,f){c=t;d=w(f,d);if(g[b]!=d)if(y("change detected in ",b),"css"==H(b))if(f=B(b),f.length){f=f.pop();var e=f.href.replace(s,"");(f.ownerNode||f).href=e+(0>e.indexOf("?")?"?":"&")+I+"="+(Date.now()||
(new Date).getTime());console.log(f);g[b]=d}else h.reload();else c=0,h.reload();else m===a&&(++m,m>=q.length?m=0:(c=4,x()));k&&clearTimeout(k);k=c&&setTimeout(x,c)},function(a,b){h.reload()})}function B(a){var b=z.call(l.styleSheets||l.querySelectorAll("link[rel=stylesheet][href]"));a&&(c.href=a,a=c.href,b=b.filter(function(b){return(b=b.href)&&0==b.indexOf(a)}));return b}function H(a){c.href=a;return c.pathname.split(".").pop()}function A(a){a=a.src||a.href;if(!a)return u;a=H(a);if(c.hostname!=C)return u;
if(!(L&&0<c.pathname.indexOf(".min.")))return-1<".css.js".indexOf(a)&&-1==c.pathname.indexOf("/jasmine/lib/")?c.pathname+c.search.replace(s,""):u}function w(a,b){return a&&(a.getResponseHeader("ETag")||a.getResponseHeader("Last-Modified"))||b}function y(){return e.console&&console.debug&&console.debug.apply(console,arguments)}var t=500,G=5E3,K=!0,J=!0,L=!0,D="HEAD",E="GET",I="_w_",l=e.document,h=e.location,C=h.hostname,q=[],g={},F={},z=q.slice,c=l.createElement("a"),s=RegExp("(\\?|\\&)"+I+"=[^\\&]+"),
m,k,r,v=e.jajax||function(a){return function(b,c,e){return a.ajax(b).done(c).fail(e)}}(e.jQuery||e.Zepto);"function"==typeof define&&define.amd?define([],n):(r=setTimeout(n,t),l.addEventListener("DOMContentLoaded",n))})(this);
